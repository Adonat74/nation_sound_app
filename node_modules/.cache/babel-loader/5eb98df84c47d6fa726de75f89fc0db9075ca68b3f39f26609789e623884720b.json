{"ast":null,"code":"import _slicedToArray from\"C:/Bureau/Projet MSRP/NationSound/nation_sound/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";import{MapContainer,TileLayer,useMap,Marker,Popup,ImageOverlay}from'react-leaflet';import'leaflet/dist/leaflet.css';import{LatLngBounds,Map,CRS,Icon}from\"leaflet\";import\"./Carte.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Carte(){var bounds=new LatLngBounds([0,0],[500,1000]);var _React$useState=React.useState(\"\"),_React$useState2=_slicedToArray(_React$useState,2),catFilter=_React$useState2[0],setCatFilter=_React$useState2[1];var _React$useState3=React.useState([]),_React$useState4=_slicedToArray(_React$useState3,2),mapData=_React$useState4[0],setMapData=_React$useState4[1];function handleChangeCat(event){setCatFilter(function(){return event.target.value;});};var catQuery=catFilter===\"\"?\"\":\"?filter[field_cat]=\".concat(catFilter);React.useEffect(function(){fetch(\"http://drupal-api-nation-sound.free.nf/jsonapi/node/lieu_carte\".concat(catQuery)).then(function(res){return res.json();}).then(function(data){return setMapData(data.data);});},[catFilter]);var markers=mapData.map(function(data){var customIcon=new Icon({iconUrl:\"/images/icons/pin-\".concat(data.attributes.field_cat,\".svg\"),iconSize:[35,35]});return/*#__PURE__*/_jsx(Marker,{position:[data.attributes.field_lat,data.attributes.field_lng],icon:customIcon,children:/*#__PURE__*/_jsxs(Popup,{children:[/*#__PURE__*/_jsx(\"h2\",{children:data.attributes.title}),/*#__PURE__*/_jsx(\"p\",{children:data.attributes.field_description_lieu.value})]})});});return/*#__PURE__*/_jsxs(\"div\",{id:\"map\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"filter\",children:/*#__PURE__*/_jsxs(\"select\",{value:catFilter,onChange:handleChangeCat,name:\"catChoice\",className:\"catFilter\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Toutes les cat\\xE9gories\"}),/*#__PURE__*/_jsx(\"option\",{value:\"scene\",children:\"Sc\\xE8nes\"}),/*#__PURE__*/_jsx(\"option\",{value:\"restauration\",children:\"Restauration\"}),/*#__PURE__*/_jsx(\"option\",{value:\"buvette\",children:\"Buvettes\"}),/*#__PURE__*/_jsx(\"option\",{value:\"toilettes\",children:\"Toilettes\"})]})}),/*#__PURE__*/_jsxs(MapContainer,{center:[250,500],zoom:0,maxZoom:3,scrollWheelZoom:true,crs:CRS.Simple,children:[/*#__PURE__*/_jsx(ImageOverlay,{url:\"http://drupal10/sites/default/files/2023-08/Capture%20d%27%C3%A9cran%202023-08-30%20175241.png\",bounds:bounds,zIndex:10}),markers]})]});}","map":{"version":3,"names":["React","MapContainer","TileLayer","useMap","Marker","Popup","ImageOverlay","LatLngBounds","Map","CRS","Icon","jsx","_jsx","jsxs","_jsxs","Carte","bounds","_React$useState","useState","_React$useState2","_slicedToArray","catFilter","setCatFilter","_React$useState3","_React$useState4","mapData","setMapData","handleChangeCat","event","target","value","catQuery","concat","useEffect","fetch","then","res","json","data","markers","map","customIcon","iconUrl","attributes","field_cat","iconSize","position","field_lat","field_lng","icon","children","title","field_description_lieu","id","className","onChange","name","center","zoom","maxZoom","scrollWheelZoom","crs","Simple","url","zIndex"],"sources":["C:/Bureau/Projet MSRP/NationSound/nation_sound/src/Components/Carte/Carte.js"],"sourcesContent":["import React from \"react\";\r\nimport { MapContainer, TileLayer, useMap, Marker, Popup, ImageOverlay } from 'react-leaflet'\r\nimport 'leaflet/dist/leaflet.css';\r\nimport { LatLngBounds, Map, CRS, Icon } from \"leaflet\";\r\nimport \"./Carte.css\"\r\n\r\nexport default function Carte () {\r\n\r\n    const bounds = new LatLngBounds([0, 0], [500, 1000]);\r\n\r\n    const [catFilter, setCatFilter] = React.useState(\"\");\r\n    const [mapData, setMapData] = React.useState([]);\r\n\r\n    function handleChangeCat (event) {\r\n        setCatFilter(() => {\r\n            return event.target.value\r\n        })\r\n    };\r\n\r\n    let catQuery = catFilter === \"\" ? \"\" : `?filter[field_cat]=${catFilter}`;\r\n\r\n    \r\n    React.useEffect(() => {\r\n       \r\n        fetch(`http://drupal-api-nation-sound.free.nf/jsonapi/node/lieu_carte${catQuery}`)\r\n            .then(res => res.json())\r\n            .then(data => setMapData(data.data))\r\n            \r\n    }, [catFilter]);\r\n\r\n\r\n    const markers = mapData.map(data => {\r\n        const customIcon = new Icon({\r\n            iconUrl: `/images/icons/pin-${data.attributes.field_cat}.svg`,\r\n            iconSize: [35, 35]\r\n        });\r\n        return (\r\n            <Marker position={[data.attributes.field_lat, data.attributes.field_lng]} icon={customIcon}>\r\n                <Popup>\r\n                    <h2>{data.attributes.title}</h2>\r\n                    <p>{data.attributes.field_description_lieu.value}</p>\r\n                </Popup>\r\n            </Marker>\r\n        )\r\n    })\r\n\r\n\r\n\r\n\r\n\r\n    return(\r\n        <div id=\"map\">\r\n\r\n\r\n            <div className=\"filter\">\r\n                <select\r\n                value={catFilter}\r\n                onChange={handleChangeCat}\r\n                name=\"catChoice\"\r\n                className=\"catFilter\">\r\n                    <option value=\"\">Toutes les catégories</option>\r\n                    <option value=\"scene\">Scènes</option>\r\n                    <option value=\"restauration\">Restauration</option>\r\n                    <option value=\"buvette\">Buvettes</option>\r\n                    <option value=\"toilettes\">Toilettes</option>\r\n                </select>\r\n            </div>\r\n\r\n\r\n\r\n            <MapContainer center={[250, 500]} zoom={0} maxZoom={3} scrollWheelZoom={true} crs={CRS.Simple}>\r\n                <ImageOverlay\r\n                    url=\"http://drupal10/sites/default/files/2023-08/Capture%20d%27%C3%A9cran%202023-08-30%20175241.png\"\r\n                    bounds={bounds}\r\n                    zIndex={10}                  \r\n                />\r\n                {markers}  \r\n            </MapContainer>\r\n        </div>\r\n    );\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}